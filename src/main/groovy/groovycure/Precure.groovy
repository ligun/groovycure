package groovycure

class Precure implements GroovyInterceptable {
    private static final def precure
    private Precure() {}

    static void main(String... args) {
        def cli = new CliBuilder(usage:"Precure - Japanese battle heroine -")

        cli.e(argName: 'script', args: 1, 'run script')
        cli.h(longOpt: 'help', 'display to help')

        def opt = cli.parse(args)

        if(!opt) return

        if(opt.e){
            def shell = new GroovyShell(Precure.classLoader)
            shell.evaluate("""\
import groovycure.Precure
${opt.e}
"""
            )
            return
        }
        if(opt.h){
            cli.usage()
        }
    }

    static {
        def nagisa = new Girl(
                '美墨なぎさ',
                'キュアブラック',
                '''\
光の使者、キュアブラック
光の使者、キュアホワイト
ふたりはプリキュア！
闇の力のしもべたちよ！
とっととお家に帰りなさい！\
'''
        )
        def honoka = new Girl(
                '雪城ほのか',
                'キュアホワイト',
                '''\
光の使者、キュアブラック
光の使者、キュアホワイト
ふたりはプリキュア！
闇の力のしもべたちよ！
とっととお家に帰りなさい！\
'''
        )
        def hikari = new Girl(
                '九条ひかり',
                'シャイニールミナス',
                '輝く命！シャイニールミナス！\n光の心と光の意志、全てをひとつにするために！\n'
        )

        def saki = new Girl(
                '日向咲',
                'キュアブルーム',
                '''\
はばたけ大地に！
輝く金の花！キュアブルーム！
聖なる泉を汚すものよ！
阿漕な真似はおやめなさい！\
'''
        )
        def mai = new Girl(
                '美翔舞',
                'キュアイーグレット',
                '''\
はばたけ空に！
煌めく銀の翼！キュアイーグレット！
聖なる泉を汚すものよ！
阿漕な真似はおやめなさい！\
'''
        )

        def nozomi = new Girl(
                '夢空のぞみ',
                'キュアドリーム',
                '大いなる希望の力、キュアドリーム！'
        )
        def rin = new Girl(
                '夏木りん',
                'キュアルージュ',
                '情熱の赤い炎、キュアルージュ！'
        )
        def urara = new Girl(
                '春日野うらら',
                'キュアレモネード',
                'はじけるレモンの香り、キュアレモネード！'
        )
        def komachi = new Girl(
                '秋元こまち',
                'キュアミント',
                'やすらぎの緑の大地、キュアミント！'
        )
        def karen = new Girl(
                '水無月かれん',
                'キュアアクア',
                '知性の青き泉、キュアアクア！'
        )
        def kurumi = new Girl(
                '美々野くるみ',
                'ミルキィローズ',
                '青いバラは秘密のしるし！ミルキィローズ！'
        )

        def love = new Girl(
                '桃園ラブ',
                'キュアピーチ',
                'ピンクのハートはあいあるしるし！\nもぎたてフレッシュ、キュアピーチ！'
        )
        def miki = new Girl(
                '蒼乃美希',
                'キュアベリー',
                'ブルーのハートは希望のしるし！\n摘みたてフレッシュ、キュアベリー！'
        )

        def inori = new Girl(
                '山吹祈里',
                'キュアパイン',
                'イエローハートは祈りのしるし！\nとれたてフレッシュ、キュアパイン！'
        )

        def setsuna = new Girl(
                '東せつな',
                'キュアパッション',
                '真っ赤なハートは幸せの証！\n熟れたてフレッシュ、キュアパッション！'
        )

        def tsubomi = new Girl(
                '花咲つぼみ',
                'キュアブロッサム',
                '大地に咲く一輪の花！キュアブロッサム！'
        )
        def erika = new Girl(
                '来海えりか',
                'キュアマリン',
                '海風に揺れる一輪の花！キュアマリン！'
        )
        def itsuki = new Girl(
                '明堂院いつき',
                'キュアサンシャイン',
                '陽の光浴びる一輪の花！キュアサンシャイン！'
        )
        def yuri = new Girl(
                '月影ゆり',
                'キュアムーンライト',
                '月光に冴える一輪の花！キュアムーンライト！'
        )

        def hibiki = new Girl(
                '北条響',
                'キュアメロディ',
                '爪弾くは荒ぶる調べ！キュアメロディ！'
        )
        def kanade = new Girl(
                '南野奏',
                'キュアリズム',
                '爪弾くはたおやかな調べ！キュアリズム！'
        )
        def eren = new Girl(
                '黒川エレン',
                'キュアビート',
                '爪弾くは魂の調べ！キュアビート！'
        )
        def ako = new Girl(
                '調辺アコ',
                'キュアミューズ',
                '爪弾くは女神の調べ！キュアミューズ！'
        )

        def miyuki = new Girl(
                '星空みゆき',
                'キュアハッピー',
                'キラキラ輝く未来の光！キュアハッピー！'
        )
        def akane = new Girl(
                '日野あかね',
                'キュアサニー',
                '太陽サンサン熱血パワー！キュアサニー！'
        )
        def yayoi = new Girl(
                '黄瀬やよい',
                'キュアピース',
                'ピカピカぴかりんじゃんけんポン！キュアピース！'
        )
        def nao = new Girl(
                '緑川なお',
                'キュアマーチ',
                '勇気リンリン直球勝負！キュアマーチ！'
        )
        def reika = new Girl(
                '青木れいか',
                'キュアビューティ',
                'しんしんと降り積もる清き心、キュアビューティ！'
        )

        def mana = new Girl(
                '相田マナ',
                'キュアハート',
                'みなぎる愛！キュアハート！'
        )
        def rikka = new Girl(
                '菱川六花',
                'キュアダイヤモンド',
                '英知の光！キュアダイヤモンド'
        )
        def arisu = new Girl(
                '四葉ありす',
                'キュアロゼッタ',
                'ひだまりポカポカ！キュアロゼッタ！'
        )
        def makoto = new Girl(
                '剣崎真琴',
                'キュアソード',
                '勇気の刃！キュアソード！'
        )
        def aguri = new Girl(
                '円亜久里',
                'キュアエース',
                '愛の切り札！キュアエース！'
        )

        def megumi = new Girl(
                '愛乃めぐみ',
                'キュアラブリー',
                '世界に広がるビッグな愛！キュアラブリー！'
        )
        def hime = new Girl(
                '白雪ひめ',
                'キュアプリンセス',
                '天空に舞う蒼き風！キュアプリンセス！'
        )
        def yuuko = new Girl(
                '大森ゆうこ',
                'キュアハニー',
                '大地に実る命の光！キュアハニー！'
        )
        def iona = new Girl(
                '氷川いおな',
                'キュアフォーチュン',
                '夜空にきらめく希望の星！キュアフォーチュン！'
        )

        def haruka = new Girl(
                '春野はるか',
                'キュアフローラ',
                '咲き誇る花のプリンセス！キュアフローラ！'
        )

        def minami = new Girl(
                '海藤みなみ',
                'キュアマーメイド',
                '澄みわたる海のプリンセス！キュアマーメイド！'
        )

        def kirara = new Girl(
                '天ノ川きらら',
                'キュアトゥインクル',
                'きらめく星のプリンセス！キュアトゥインクル！'
        )

        def towa = new Girl(
                '紅城トワ',
                'キュアスカーレット',
                '真紅の炎のプリンセス！キュアスカーレット！'
        )

        def unmarked_girls = Collections.unmodifiableMap(
                [
                        'nagisa':nagisa,
                        'honoka':honoka
                ])

        def maxheart_girls = Collections.unmodifiableMap(
                [
                        'nagisa':nagisa,
                        'honoka':honoka,
                        'hikari':hikari
                ])

        def splashstar_girls = Collections.unmodifiableMap(
                [
                        'saki':saki,
                        'mai':mai
                ])

        def yes_girls = Collections.unmodifiableMap(
                [
                        'nozomi':nozomi,
                        'rin':rin,
                        'urara':urara,
                        'komachi':komachi,
                        'karen':karen
                ])

        def gogo_girls = Collections.unmodifiableMap(
                [
                        'nozomi':nozomi,
                        'rin':rin,
                        'urara':urara,
                        'komachi':komachi,
                        'karen':karen,
                        'kurumi':kurumi
                ])

        def fresh_girls = Collections.unmodifiableMap(
                [
                        'love':love,
                        'miki':miki,
                        'inori':inori,
                        'setsuna':setsuna
                ])

        def heartcatch_girls = Collections.unmodifiableMap(
                [
                        'tsubomi':tsubomi,
                        'erika':erika,
                        'itsuki':itsuki,
                        'yuri':yuri
                ])

        def suite_girls = Collections.unmodifiableMap(
                [
                        'hibiki':hibiki,
                        'kanade':kanade,
                        'eren':eren,
                        'ako':ako
                ])

        def smile_girls = Collections.unmodifiableMap(
                [
                        'miyuki':miyuki,
                        'akane':akane,
                        'yayoi':yayoi,
                        'nao':nao,
                        'reika':reika
                ])

        def dokidoki_girls = Collections.unmodifiableMap(
                [
                        'mana':mana,
                        'rikka':rikka,
                        'arisu':arisu,
                        'makoto':makoto,
                        'aguri':aguri
                ])

        def happinesscharge_girls = Collections.unmodifiableMap(
                [
                        'megumi':megumi,
                        'hime':hime,
                        'yuuko':yuuko,
                        'iona':iona
                ])

        def goprincess_girls = Collections.unmodifiableMap(
                [
                        'haruka':haruka,
                        'minami':minami,
                        'kirara':kirara,
                        'towa':towa,
                ])

        precure = Collections.unmodifiableMap(
                new LinkedHashMap<String, Series>(){{
                    put('unmarked',new Series('ふたりはプリキュア',new Date('2004/2/1'),new Date('2005/1/30'),unmarked_girls))
                    put('maxheart',new Series('ふたりはプリキュア Max Heart',new Date('2005/2/6'),new Date('2006/1/29'),maxheart_girls))
                    put('splashstar',new Series('ふたりはプリキュア Splash Star',new Date('2006/2/5'),new Date('2007/1/28'),splashstar_girls))
                    put('yes',new Series('Yes！プリキュア5',new Date('2007/2/4'),new Date('2008/1/27'),yes_girls))
                    put('gogo',new Series('Yes！プリキュア5 Go Go！',new Date('2008/2/3'),new Date('2009/1/25'),gogo_girls))
                    put('fresh',new Series('フレッシュプリキュア',new Date('2009/2/1'),new Date('2010/1/31'),fresh_girls))
                    put('heartcatch',new Series('ハートキャッチプリキュア',new Date('2010/2/7'),new Date('2011/1/30'),heartcatch_girls))
                    put('suite',new Series('スイートプリキュア',new Date('2011/2/6'),new Date('2012/2/29'),suite_girls))
                    put('smile',new Series('スマイルプリキュア',new Date('2012/2/5'),new Date('2013/1/27'),smile_girls))
                    put('dokidoki',new Series('ドキドキ！プリキュア',new Date('2013/2/3'),new Date('2014/1/26'),dokidoki_girls))
                    put('happinesscharge',new Series('ハピネスチャージプリキュア',new Date('2014/2/2'),new Date('2015/1/25'),happinesscharge_girls))
                    put('goprincess',new Series('Go！プリンセスプリキュア',new Date('2015/2/1'),null,goprincess_girls,true))
                }}
        )

        precure.getMetaClass().now = { delegate.find{ it.value.now }.value }
        precure.getMetaClass().slug = { delegate.collect{ it.key } }
        precure.getMetaClass().series = { delegate.collect{ it.value } }

        Precure.metaClass.static.invokeMethod = { name, args ->
            precure."$name"(*args)
        }

        Precure.metaClass.static.propertyMissing = { name ->
            precure."$name"
        }
    }
}

